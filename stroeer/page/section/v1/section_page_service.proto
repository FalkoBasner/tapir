syntax = "proto3";

package stroeer.page.section.v1;

import "stroeer/page/section/v1/section_page.proto";

option go_package = "github.com/stroeer/tapir/go/stroeer/page/section/v1;section";
option java_multiple_files = true;
option java_package = "de.stroeer.page.section.v1";

// Service to fetch all data needed to render a section page, like the homepage or "/politik/"
service SectionPageService {
  /**
    | scenario | description | gRPC status | gRPC error payload | HTTP Status | cacheable |
    |:---|:---|:---:|:---|:---:|:---:|
    | found | all data for the section page was found | OK | none | none | yes |
    | section path is empty | client did not provide a section path | INVALID_ARGUMENT | [google.rpc.BadRequest](https://github.com/googleapis/googleapis/blob/3e9b231b098d514c9a51ba8c59e416f45837b195/google/rpc/error_details.proto#L169) | 400 | yes
    | section path is invalid | client provided an invalid section path | INVALID_ARGUMENT | [google.rpc.BadRequest](https://github.com/googleapis/googleapis/blob/3e9b231b098d514c9a51ba8c59e416f45837b195/google/rpc/error_details.proto#L169) | 400 | yes
    | section path is unknown | client provided an unknown section path | NOT_FOUND | none | 404 | yes
    | internal | internal error while loading section data | INTERNAL | none | 500 | no
    | timeout | timeout while loading section data | DEADLINE_EXCEEDED | none | 504 | no

    **Scenarios about incomplete section data needs to be defined**
   */
  rpc GetSectionPage (GetSectionPageRequest) returns (GetSectionPageResponse) {}
}

// Message to provide parameters when requesting data for a section page, currently only the path of the page.
// Correct paths have a leading and a trailing slash, like `/nachrichten/unterhaltung/`
// The homepage has the path `/`.
message GetSectionPageRequest {
  string section_path = 1;
}

// Response message when requesting data for a section page.
// Responds with `NOT_FOUND` if an unknown path is requested, or the path is incorrect.
message GetSectionPageResponse {
  stroeer.page.section.v1.SectionPage section_page = 1;
}

